
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://raiffeisen-dgtl.github.io/checkita-data-quality/01-application-setup/03-ResultsStorage/" rel="canonical"/>
<link href="../02-ApplicationSubmit/" rel="prev"/>
<link href="../04-APIServer/" rel="next"/>
<link href="../../logo/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.44" name="generator"/>
<title>Data Quality Results Storage - Checkita Data Quality</title>
<link href="../../assets/stylesheets/main.0253249f.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="yellow" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#data-quality-results-storage">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Checkita Data Quality" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Checkita Data Quality">
<img alt="logo" src="../../logo/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Checkita Data Quality
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Data Quality Results Storage
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/Raiffeisen-DGTL/checkita-data-quality" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    checkita-data-quality
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../">
          
  
    
  
  Application Setup

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../02-general-information/">
          
  
    
  
  General Information

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../03-job-configuration/">
          
  
    
  
  Job Configuration

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../changelog/CHANGELOG/">
        
  
    
  
  Changelog

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../contribution/">
          
  
    
  
  Contribution

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../api/">
        
  
    
  
  Scala API Doc

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../swagger/">
        
  
    
  
  Swagger Doc

      </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Checkita Data Quality" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Checkita Data Quality">
<img alt="logo" src="../../logo/logo.png"/>
</a>
    Checkita Data Quality
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/Raiffeisen-DGTL/checkita-data-quality" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    checkita-data-quality
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Application Setup
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Application Setup
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../01-ApplicationSettings/">
<span class="md-ellipsis">
    Application Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../02-ApplicationSubmit/">
<span class="md-ellipsis">
    Submitting Data Quality Application
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Data Quality Results Storage
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Data Quality Results Storage
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#results-types-and-schemas">
<span class="md-ellipsis">
      Results Types and Schemas
    </span>
</a>
<nav aria-label="Results Types and Schemas" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#regular-metrics-results-schema">
<span class="md-ellipsis">
      Regular Metrics Results Schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#composed-metrics-results-schema">
<span class="md-ellipsis">
      Composed Metrics Results Schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#trend-metrics-results-schema">
<span class="md-ellipsis">
      Trend Metrics Results Schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metric-error-results-schema">
<span class="md-ellipsis">
      Metric Error Results Schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#load-checks-results-schema">
<span class="md-ellipsis">
      Load Checks Results Schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#checks-results-schema">
<span class="md-ellipsis">
      Checks Results Schema
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#job-state-schema">
<span class="md-ellipsis">
      Job State Schema
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hive-storage-setup-scripts">
<span class="md-ellipsis">
      Hive Storage Setup Scripts
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../04-APIServer/">
<span class="md-ellipsis">
    API Server
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../02-general-information/">
<span class="md-ellipsis">
    General Information
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            General Information
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-general-information/01-WorkingWithDateTime/">
<span class="md-ellipsis">
    Working with Date and Time
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-general-information/02-EnvironmentAndExtraVariables/">
<span class="md-ellipsis">
    Usage of Environment Variables and Extra Variables
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-general-information/03-StatusModel/">
<span class="md-ellipsis">
    Status Model used in Results
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-general-information/04-ErrorCollection/">
<span class="md-ellipsis">
    Metric Error Collection
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-general-information/05-StreamingMode/">
<span class="md-ellipsis">
    Data Quality Checks over Streaming Sources
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-general-information/06-MetricSQLEquivalency/">
<span class="md-ellipsis">
    Metrics SQL Equivalency
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-general-information/07-MetricCalculatorEngines/">
<span class="md-ellipsis">
    Metric Calculator Engines Overview and Benchmarking
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-general-information/08-CheckFailureTolerance/">
<span class="md-ellipsis">
    Check Failure Tolerance
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../03-job-configuration/">
<span class="md-ellipsis">
    Job Configuration
  </span>
</a>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Job Configuration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/01-Connections/">
<span class="md-ellipsis">
    Connections Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/02-Schemas/">
<span class="md-ellipsis">
    Schemas Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/03-Sources/">
<span class="md-ellipsis">
    Sources Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/04-Streams/">
<span class="md-ellipsis">
    Streaming Sources Configurations
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/05-VirtualSources/">
<span class="md-ellipsis">
    Virtual Sources Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/06-VirtualStreams/">
<span class="md-ellipsis">
    Virtual Streaming Sources Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/07-LoadChecks/">
<span class="md-ellipsis">
    Load Checks Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/08-Metrics/">
<span class="md-ellipsis">
    Metrics Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/09-Checks/">
<span class="md-ellipsis">
    Checks Configurations
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/10-Targets/">
<span class="md-ellipsis">
    Targets Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/11-FileOutputs/">
<span class="md-ellipsis">
    File Output Configuration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../03-job-configuration/12-JobConfigExample/">
<span class="md-ellipsis">
    Job Configuration Example
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../changelog/CHANGELOG/">
<span class="md-ellipsis">
    Changelog
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../contribution/">
<span class="md-ellipsis">
    Contribution
  </span>
</a>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Contribution
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../contribution/code-of-conduct/">
<span class="md-ellipsis">
    Code of Conduct
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contribution/contribution/">
<span class="md-ellipsis">
    Contribution Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/">
<span class="md-ellipsis">
    Scala API Doc
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../swagger/">
<span class="md-ellipsis">
    Swagger Doc
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="data-quality-results-storage">Data Quality Results Storage</h1>
<p>In order to use all features of the framework, it is required to set up a results storage. Checkita can use various
RDBMS as a results storage. Also, Hive can be used as a results storage and even a simple file storage is supported.</p>
<p>The full list of various storage types is following:</p>
<ul>
<li><code>PostgreSQL</code> (v.9.3 and higher) - recommended database to be used as resutls storage.</li>
<li><code>Oracle</code></li>
<li><code>MySQL</code></li>
<li><code>Microsoft SQL Server</code></li>
<li><code>SQLite</code></li>
<li><code>H2</code></li>
<li><code>Hive</code></li>
<li><code>File</code> (directory in local file system or remote one (HDFS, S3))</li>
</ul>
<p>Checkita framework support results storage schema evolution. <a href="https://flywaydb.org/">Flyway</a> is run under the hood to
support schema migrations. Therefore, if one of the supported RDBMS is chosen for results storage then it is possible
to set it up during the first run of the Data Quality job providing <code>-m</code> application argument on startup.
For more details on how to run Data Quality applications refer to 
<a href="../02-ApplicationSubmit/">Submitting Data Quality Application</a> chapter.</p>
<blockquote>
<p><strong>IMPORTANT</strong>: Flyway migrations usually run either in empty database/schema or in one that was initiated with 
Flyway. In Checkita framework it is also possible to run migration in non-empty database/schema. In this case
it is up to user to ensure that there are no conflicting table names in database/schema.</p>
</blockquote>
<p>If <code>File</code> type of storage is used then it is only required to provide a path to a directory/bucket, where results
will be stored. Results are stored as parquet files with the same schema as for RDMS storage. No schema evolution
mechanisms are provided for <code>File</code> type of storage. Therefore, if results schemas would evolve later,
it will be up to user to update existing results to a new structure.</p>
<blockquote>
<p><strong>IMPORTANT</strong>: There is no partitioning used for storing results as parquet files.
Every job will read entire results history and overwrite it adding new ones. Therefore, using <code>File</code> type of storage
is not recommended for production use. </p>
</blockquote>
<p>For <code>Hive</code> type of storage the schema evolution mechanisms are also not available. Therefore, it is up to user to
create corresponding hive tables. DDL scripts from <a href="#hive-storage-setup-scripts">Hive Storage Setup Scripts</a> chapter
below can be used for that.</p>
<blockquote>
<p><strong>IMPORTANT</strong>: Results hive table must be partitioned by <code>job_id</code>. Job ID is chosen as partition column to support
faster results fetching during computation of trend checks (used for anomaly detection in data).
<code>Hive</code> type of results storage works faster that <code>File</code> one, since only partition for current <code>job_id</code> is read and 
overwritten. Nevertheless, this type of storage is also not recommended for use in production where large number of
jobs will be run.</p>
</blockquote>
<h2 id="results-types-and-schemas">Results Types and Schemas</h2>
<p>There are for types of result are written in storage:</p>
<ul>
<li>regular metrics results</li>
<li>composed metrics results</li>
<li>trend metric results</li>
<li>load checks results</li>
<li>checks results</li>
<li>job state</li>
</ul>
<p>Schemas for all results types are given below.</p>
<p>Primary keys denotes how we keep track if unique records: 
generally results for the same Data Quality job that is run for the same reference date are overwritten.
History of various attempts of the same job for the same reference date is not stored. It is done in order trend metrics
and trend checks work correctly as their computation requires reading historical results from Data Quality storage.
Therefore, it is required that there will be only one set of results per Data Quality job and given reference date.</p>
<h3 id="regular-metrics-results-schema">Regular Metrics Results Schema</h3>
<ul>
<li>Primary key: <code>(job_id, metric_id, metric_name, reference_date)</code>;</li>
<li><code>source_id</code> &amp; <code>column_names</code> contain string representation of lists in format <code>'[val1,val2,val3]'</code>.</li>
<li><code>params</code> is a JSON string.</li>
</ul>
<table>
<thead>
<tr>
<th>Column Name</th>
<th>Column Type</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>job_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>metric_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>metric_name</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>description</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>metadata</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>source_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>column_names</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>params</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>result</td>
<td>DOUBLE</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>additional_result</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>reference_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>execution_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
</tbody>
</table>
<h3 id="composed-metrics-results-schema">Composed Metrics Results Schema</h3>
<ul>
<li>Primary key: <code>(job_id, metric_id, reference_date)</code>;</li>
<li><code>source_id</code> contains string representation of list in format <code>'[val1,val2,val3]'</code>.</li>
</ul>
<table>
<thead>
<tr>
<th>Column Name</th>
<th>Column Type</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>job_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>metric_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>metric_name</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>description</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>metadata</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>source_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>formula</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>result</td>
<td>DOUBLE</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>additional_result</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>reference_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>execution_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
</tbody>
</table>
<h3 id="trend-metrics-results-schema">Trend Metrics Results Schema</h3>
<ul>
<li>Primary key: <code>(job_id, metric_id, reference_date)</code>;</li>
<li><code>source_id</code> contains string representation of list in format <code>'[val1,val2,val3]'</code>.</li>
<li><code>params</code> is a JSON string.</li>
</ul>
<table>
<thead>
<tr>
<th>Column Name</th>
<th>Column Type</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>job_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>metric_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>metric_name</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>description</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>metadata</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>source_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>params</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>result</td>
<td>DOUBLE</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>additional_result</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>reference_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>execution_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
</tbody>
</table>
<h3 id="metric-error-results-schema">Metric Error Results Schema</h3>
<ul>
<li>Primary key: <code>(job_id, error_hash, reference_date)</code>;</li>
<li><code>source_id</code> is a JSON string;</li>
<li><code>source_key_fields</code> is a JSON string;</li>
<li><code>metric_columns</code> is a JSON string;</li>
<li><code>row_data</code> is a JSON string.</li>
<li><code>errorHash</code> is a MD5 hash string computed from values of columns <code>metric_id</code>, <code>status</code>, <code>message</code> and <code>row_data</code></li>
</ul>
<blockquote>
<p><strong>NOTE</strong> Error hash is computed with use of raw value of <code>row_data</code> field even if it is encrypted later.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Column Name</th>
<th>Column Type</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>job_id</td>
<td>TEXT</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>metric_id</td>
<td>TEXT</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>source_id</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>source_key_fields</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>metric_columns</td>
<td>TEXT</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>TEXT</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>message</td>
<td>TEXT</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>row_data</td>
<td>TEXT</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>error_hash</td>
<td>TEXT</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>reference_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>execution_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
</tbody>
</table>
<h3 id="load-checks-results-schema">Load Checks Results Schema</h3>
<ul>
<li>Primary key: <code>(job_id, check_id, reference_date)</code>;</li>
<li><code>source_id</code> contains string representation of lists in format <code>'[val1,val2,val3]'</code>.</li>
</ul>
<table>
<thead>
<tr>
<th>Column Name</th>
<th>Column Type</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>job_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>check_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>check_name</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>description</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>metadata</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>source_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>expected</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>message</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>is_critical</td>
<td>BOOLEAN</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>reference_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>execution_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
</tbody>
</table>
<h3 id="checks-results-schema">Checks Results Schema</h3>
<ul>
<li>Primary key: <code>(job_id, check_id, reference_date)</code>;</li>
<li><code>source_id</code> contains string representation of lists in format <code>'[val1,val2,val3]'</code>.</li>
<li><code>compare_metric</code> contains sequence of metrics to compare with <code>[val1,val2]</code>. Usually empty list or single metric.
  But expression checks can use multiple metrics in their formulas, which will be stored in this field,
  except the very first metric which is considered as <code>base_metric</code>.</li>
</ul>
<table>
<thead>
<tr>
<th>Column Name</th>
<th>Column Type</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>job_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>check_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>check_name</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>description</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>metadata</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>source_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>base_metric</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>compared_metric</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>compared_threshold</td>
<td>DOUBLE</td>
<td></td>
</tr>
<tr>
<td>lower_bound</td>
<td>DOUBLE</td>
<td></td>
</tr>
<tr>
<td>upper_bound</td>
<td>DOUBLE</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>message</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>is_critical</td>
<td>BOOLEAN</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>reference_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>execution_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
</tbody>
</table>
<h3 id="job-state-schema">Job State Schema</h3>
<ul>
<li>Primary key: <code>(job_id, reference_date)</code>;</li>
<li><code>version_info</code> is a JSON string;</li>
<li><code>config</code> is a JSON string.</li>
</ul>
<table>
<thead>
<tr>
<th>Column Name</th>
<th>Column Type</th>
<th>Constraint</th>
</tr>
</thead>
<tbody>
<tr>
<td>job_id</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>config</td>
<td>STRING</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>version_info</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td>reference_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>execution_date</td>
<td>TIMESTAMP</td>
<td>NOT NULL</td>
</tr>
</tbody>
</table>
<h2 id="hive-storage-setup-scripts">Hive Storage Setup Scripts</h2>
<p>Below is a HiveQL script that can be used to set up Hive results storage:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1">-- REPLACE &lt;schema_name&gt; and &lt;schema_dir&gt; with actual name and path:
</span><span id="__span-0-2">set hivevar:schema_name=&lt;schema_name&gt;;
</span><span id="__span-0-3">set hivevar:schema_dir=&lt;schema_path&gt;;
</span><span id="__span-0-4">
</span><span id="__span-0-5">CREATE SCHEMA IF NOT EXISTS ${schema_name};
</span><span id="__span-0-6">
</span><span id="__span-0-7">DROP TABLE IF EXISTS ${schema_name}.results_metric_regular;
</span><span id="__span-0-8">CREATE EXTERNAL TABLE ${schema_name}.results_metric_regular
</span><span id="__span-0-9">(
</span><span id="__span-0-10">    metric_id         STRING COMMENT '',
</span><span id="__span-0-11">    metric_name       STRING COMMENT '',
</span><span id="__span-0-12">    description       STRING COMMENT '',
</span><span id="__span-0-13">    metadata          STRING COMMENT '',
</span><span id="__span-0-14">    source_id         STRING COMMENT '',
</span><span id="__span-0-15">    column_names      STRING COMMENT '',
</span><span id="__span-0-16">    params            STRING COMMENT '',
</span><span id="__span-0-17">    result            DOUBLE COMMENT '',
</span><span id="__span-0-18">    additional_result STRING COMMENT '',
</span><span id="__span-0-19">    reference_date    TIMESTAMP COMMENT '',
</span><span id="__span-0-20">    execution_date    TIMESTAMP COMMENT ''
</span><span id="__span-0-21">)
</span><span id="__span-0-22">COMMENT 'Data Quality Regular Metrics Results'
</span><span id="__span-0-23">PARTITIONED BY (job_id STRING)
</span><span id="__span-0-24">STORED AS PARQUET
</span><span id="__span-0-25">LOCATION '${schema_dir}/results_metric_regular';
</span><span id="__span-0-26">
</span><span id="__span-0-27">DROP TABLE IF EXISTS ${schema_name}.results_metric_composed;
</span><span id="__span-0-28">CREATE EXTERNAL TABLE ${schema_name}.results_metric_composed
</span><span id="__span-0-29">(
</span><span id="__span-0-30">    metric_id         STRING COMMENT '',
</span><span id="__span-0-31">    metric_name       STRING COMMENT '',
</span><span id="__span-0-32">    description       STRING COMMENT '',
</span><span id="__span-0-33">    metadata          STRING COMMENT '',
</span><span id="__span-0-34">    source_id         STRING COMMENT '',
</span><span id="__span-0-35">    formula           STRING COMMENT '',
</span><span id="__span-0-36">    result            DOUBLE COMMENT '',
</span><span id="__span-0-37">    additional_result STRING COMMENT '',
</span><span id="__span-0-38">    reference_date    TIMESTAMP COMMENT '',
</span><span id="__span-0-39">    execution_date    TIMESTAMP COMMENT ''
</span><span id="__span-0-40">)
</span><span id="__span-0-41">COMMENT 'Data Quality Composed Metrics Results'
</span><span id="__span-0-42">PARTITIONED BY (job_id STRING)
</span><span id="__span-0-43">STORED AS PARQUET
</span><span id="__span-0-44">LOCATION '${schema_dir}/results_metric_composed';
</span><span id="__span-0-45">
</span><span id="__span-0-46">DROP TABLE IF EXISTS ${schema_name}.results_metric_trend;
</span><span id="__span-0-47">CREATE EXTERNAL TABLE ${schema_name}.results_metric_trend
</span><span id="__span-0-48">(
</span><span id="__span-0-49">  metric_id         STRING COMMENT '',
</span><span id="__span-0-50">  metric_name       STRING COMMENT '',
</span><span id="__span-0-51">  description       STRING COMMENT '',
</span><span id="__span-0-52">  metadata          STRING COMMENT '',
</span><span id="__span-0-53">  source_id         STRING COMMENT '',
</span><span id="__span-0-54">  params            STRING COMMENT '',
</span><span id="__span-0-55">  result            DOUBLE COMMENT '',
</span><span id="__span-0-56">  additional_result STRING COMMENT '',
</span><span id="__span-0-57">  reference_date    TIMESTAMP COMMENT '',
</span><span id="__span-0-58">  execution_date    TIMESTAMP COMMENT ''
</span><span id="__span-0-59">)
</span><span id="__span-0-60">COMMENT 'Data Quality Trend Metrics Results'
</span><span id="__span-0-61">PARTITIONED BY (job_id STRING)
</span><span id="__span-0-62">STORED AS PARQUET
</span><span id="__span-0-63">LOCATION '${schema_dir}/results_metric_trend';
</span><span id="__span-0-64">
</span><span id="__span-0-65">DROP TABLE IF EXISTS ${schema_name}.results_metric_error;
</span><span id="__span-0-66">CREATE EXTERNAL TABLE ${schema_name}.results_metric_error
</span><span id="__span-0-67">(
</span><span id="__span-0-68">    metric_id         STRING COMMENT '',
</span><span id="__span-0-69">    source_id         STRING COMMENT '',
</span><span id="__span-0-70">    source_key_fields STRING COMMENT '',
</span><span id="__span-0-71">    metric_columns    STRING COMMENT '',
</span><span id="__span-0-72">    status            STRING COMMENT '',
</span><span id="__span-0-73">    message           STRING COMMENT '',
</span><span id="__span-0-74">    row_data          STRING COMMENT '',
</span><span id="__span-0-75">    error_hash        STRING COMMENT '',
</span><span id="__span-0-76">    reference_date    TIMESTAMP COMMENT '',
</span><span id="__span-0-77">    execution_date    TIMESTAMP COMMENT ''
</span><span id="__span-0-78">)
</span><span id="__span-0-79">COMMENT 'Data Quality Metrics Error Results'
</span><span id="__span-0-80">PARTITIONED BY (job_id STRING)
</span><span id="__span-0-81">STORED AS PARQUET
</span><span id="__span-0-82">LOCATION '${schema_dir}/results_metric_error';
</span><span id="__span-0-83">
</span><span id="__span-0-84">DROP TABLE IF EXISTS ${schema_name}.results_check_load;
</span><span id="__span-0-85">CREATE EXTERNAL TABLE ${schema_name}.results_check_load
</span><span id="__span-0-86">(
</span><span id="__span-0-87">    check_id       STRING COMMENT '',
</span><span id="__span-0-88">    check_name     STRING COMMENT '',
</span><span id="__span-0-89">    description    STRING COMMENT '',
</span><span id="__span-0-90">    metadata       STRING COMMENT '',
</span><span id="__span-0-91">    source_id      STRING COMMENT '',
</span><span id="__span-0-92">    expected       STRING COMMENT '',
</span><span id="__span-0-93">    status         STRING COMMENT '',
</span><span id="__span-0-94">    message        STRING COMMENT '',
</span><span id="__span-0-95">    is_critical    BOOLEAN COMMENT '',
</span><span id="__span-0-96">    reference_date TIMESTAMP COMMENT '',
</span><span id="__span-0-97">    execution_date TIMESTAMP COMMENT ''
</span><span id="__span-0-98">)
</span><span id="__span-0-99">COMMENT 'Data Quality Load Checks Results'
</span><span id="__span-0-100">PARTITIONED BY (job_id STRING)
</span><span id="__span-0-101">STORED AS PARQUET
</span><span id="__span-0-102">LOCATION '${schema_dir}/results_check_load';
</span><span id="__span-0-103">
</span><span id="__span-0-104">DROP TABLE IF EXISTS ${schema_name}.results_check;
</span><span id="__span-0-105">CREATE EXTERNAL TABLE ${schema_name}.results_check
</span><span id="__span-0-106">(
</span><span id="__span-0-107">    check_id           STRING COMMENT '',
</span><span id="__span-0-108">    check_name         STRING COMMENT '',
</span><span id="__span-0-109">    description        STRING COMMENT '',
</span><span id="__span-0-110">    metadata           STRING COMMENT '',
</span><span id="__span-0-111">    source_id          STRING COMMENT '',
</span><span id="__span-0-112">    base_metric        STRING COMMENT '',
</span><span id="__span-0-113">    compared_metric    STRING COMMENT '',
</span><span id="__span-0-114">    compared_threshold DOUBLE COMMENT '',
</span><span id="__span-0-115">    lower_bound        DOUBLE COMMENT '',
</span><span id="__span-0-116">    upper_bound        DOUBLE COMMENT '',
</span><span id="__span-0-117">    status             STRING COMMENT '',
</span><span id="__span-0-118">    message            STRING COMMENT '',
</span><span id="__span-0-119">    is_critical        BOOLEAN COMMENT '',
</span><span id="__span-0-120">    reference_date     TIMESTAMP COMMENT '',
</span><span id="__span-0-121">    execution_date     TIMESTAMP COMMENT ''
</span><span id="__span-0-122">)
</span><span id="__span-0-123">COMMENT 'Data Quality Checks Results'
</span><span id="__span-0-124">PARTITIONED BY (job_id STRING)
</span><span id="__span-0-125">STORED AS PARQUET
</span><span id="__span-0-126">LOCATION '${schema_dir}/results_check';
</span><span id="__span-0-127">
</span><span id="__span-0-128">DROP TABLE IF EXISTS ${schema_name}.job_state;
</span><span id="__span-0-129">CREATE EXTERNAL TABLE ${schema_name}.job_state
</span><span id="__span-0-130">(
</span><span id="__span-0-131">    config            STRING COMMENT '',
</span><span id="__span-0-132">    version_info      STRING COMMENT '',
</span><span id="__span-0-133">    reference_date    TIMESTAMP COMMENT '',
</span><span id="__span-0-134">    execution_date    TIMESTAMP COMMENT ''
</span><span id="__span-0-135">)
</span><span id="__span-0-136">COMMENT 'Data Quality Job State'
</span><span id="__span-0-137">PARTITIONED BY (job_id STRING)
</span><span id="__span-0-138">STORED AS PARQUET
</span><span id="__span-0-139">LOCATION '${schema_dir}/job_state';
</span></code></pre></div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
<script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>